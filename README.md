Лабораторная работа 6: Рефакторинг
Проблемы качества
Длинная функция (60+ строк)
Смешение логики: парсинг, валидация, расчеты
Магические числа в коде
Сложные вложенные условия для купонов
Низкая читаемость
Примененные рефакторинги
Выделение функций - разбитие на 9 маленьких функций
Вынос констант - DEFAULT_CURRENCY, TAX_RATE, COUPON_RULES
Упрощение условий - замена if-elif на словарь правил
Улучшение имен - понятные названия функций
Что улучшилось
Читаемость: код как сценарий (парсинг → валидация → расчеты → результат)
Изменяемость: новый купон = одна запись в словарь
Тестируемость: функции тестируются отдельно
Поддержка: проще находить и исправлять ошибки
Результат
Все 4 теста проходят
Код соответствует принципам DRY/KISS
Упрощена дальнейшая разработка
